(function(t){function e(e){for(var s,c,r=e[0],o=e[1],l=e[2],u=0,f=[];u<r.length;u++)c=r[u],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&f.push(n[c][0]),n[c]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s]);d&&d(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,r=1;r<a.length;r++){var o=a[r];0!==n[o]&&(s=!1)}s&&(i.splice(e--,1),t=c(c.s=a[0]))}return t}var s={},n={app:0},i=[];function c(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=t,c.c=s,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)c.d(a,s,function(e){return t[e]}.bind(null,s));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],o=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=o;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},4678:function(t,e,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var e=i(t);return a(e)}function i(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=i,t.exports=n,n.id="4678"},"56d7":function(t,e,a){"use strict";a.r(e);a("8e6e");var s=a("bd86"),n=(a("456d"),a("ac6a"),a("3b2b"),a("a481"),a("cadf"),a("551c"),a("f751"),a("097d"),a("2b0e")),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"c-animate",attrs:{id:"addchat-bubble"},on:{click:function(e){return t.openChat()}}},[a("div",{staticClass:"c-bubble-inner"},[t.countNotification()>0?a("span",{staticClass:"c-bubble-notification",class:[null!=t.config.logged_user_id?"c-active":""]},[a("i",{staticClass:"fas fa-bell"})]):t._e(),a("img",{staticClass:"c-bubble-image",attrs:{src:t.widgetIcon(t.config.chat_icon)}})]),null==t.config.logged_user_id?a("p",[t._v(t._s(t.lang.login_first_chat))]):t._e()]),null!=t.config.logged_user_id?a("div",[t.admin||t.close?t._e():a("div",{staticClass:"c-animate",attrs:{id:"addchat-bot"}},[a("div",{staticClass:"c-sidebar"},[a("div",{staticClass:"c-top-menu"},[a("div",{staticClass:"c-top-left"}),a("div",{staticClass:"c-top-right"},[a("span",{staticClass:"c-closed",on:{click:function(e){t.close=t.add({close:!0})}}})])]),a("div",{staticClass:"c-menu"},[a("div",{staticClass:"c-menu-item c-chat",class:{"c-active":1==t.active},on:{click:function(e){return t.activated(1)}}},[t.countNotification()>0?a("span",{staticClass:"c-n-dot"},[t._v(t._s(t.countNotification()))]):t._e()]),a("div",{staticClass:"c-menu-item c-setting",class:{"c-active":3==t.active},on:{click:function(e){return t.activated(3)}}})]),a("contacts-component"),a("profile-component")],1),a("div",{staticClass:"c-chatbox",class:{"c-active":t.buddy_id>0&&(1==t.active||2==t.active)}},[a("buddy-component"),a("span",{staticClass:"c-close c-animate",on:{click:function(e){return t.add({buddy_id:0})}}},[t._v("×")]),a("messages-component"),a("send-component")],1),a("div",{staticClass:"c-footer"},[a("p",{staticClass:"c-footer-text"},[t._v(t._s(t.config.footer_text))])]),a("div",{staticClass:"c-modal c-animate",class:[t.image_modal.status],attrs:{tabindex:"-1"}},[a("div",{staticClass:"c-modal-dialog c-modal-dialog-centered"},[a("div",{staticClass:"c-modal-content"},[a("div",{staticClass:"c-modal-body"},[a("img",{staticClass:"c-modal-image",attrs:{src:t.imageSource(t.image_modal.path)},on:{click:function(e){return t.add({image_modal:{status:"",path:null}})}}})])])])]),a("div",{staticClass:"c-toast c-animate ",class:[t.notify.status,"success"==t.notify.type?"c-toast-success":"c-toast-error"]},[a("span",{staticClass:"c-toast-icon"},["primary"==t.notify.type?a("i",{staticClass:"fas fa-info-circle"}):t._e(),"success"==t.notify.type?a("i",{staticClass:"fas fa-check-circle"}):t._e(),"error"==t.notify.type?a("i",{staticClass:"fas fa-times-circle"}):t._e()]),a("p",{staticClass:"c-toast-text",domProps:{innerHTML:t._s(t.notify.message)}})])]),t.admin&&t.config.is_admin?a("div",{staticClass:"c-animate",attrs:{id:"addchat-bot-admin"}},[a("div",{staticClass:"c-toast c-animate ",class:[t.notify.status,"success"==t.notify.type?"c-toast-success":"c-toast-error"]},[a("span",{staticClass:"c-toast-icon"},["primary"==t.notify.type?a("i",{staticClass:"fas fa-info-circle"}):t._e(),"success"==t.notify.type?a("i",{staticClass:"fas fa-check-circle"}):t._e(),"error"==t.notify.type?a("i",{staticClass:"fas fa-times-circle"}):t._e()]),a("p",{staticClass:"c-toast-text",domProps:{innerHTML:t._s(t.notify.message)}})]),a("div",{staticClass:"ca-header"},[a("div",{staticClass:"ca-menu-toggle",on:{click:function(e){t.ca_sidebar=1}}},[a("i",{staticClass:"fas fa-bars"})]),a("h5",{staticClass:"ca-header-text c-animate",on:{click:function(e){t.admin=null}}},[t._v(t._s(t.lang.switch_chat))])]),a("div",{staticClass:"ca-sidebar",class:{"ca-active":1==t.ca_sidebar}},[a("div",{staticClass:"ca-header-brand-wrap"},[a("img",{staticClass:"ca-header-avatar",attrs:{src:t.chatLogo(t.config.site_logo)}}),a("h5",{staticClass:"ca-header-brand"},[t._v(t._s(t.config.site_name)+" "+t._s(t.lang.admin))])]),a("div",{staticClass:"ca-sidebar-close",on:{click:function(e){t.ca_sidebar=0}}},[a("i",{staticClass:"fas fa-bars"})]),a("ul",{staticClass:"ca-sidebar-list"},[a("li",{staticClass:"ca-sidebar-list-item",class:{"ca-active":2===t.ca_active},on:{click:function(e){t.ca_active=2}}},[t._v(t._s(t.lang.conversations))]),a("li",{staticClass:"ca-sidebar-list-item",class:{"ca-active":5===t.ca_active},on:{click:function(e){t.ca_active=5}}},[t._v(t._s(t.lang.settings))])]),a("div",{staticClass:"ca-footer"},[t._v(t._s(t.config.footer_text))])]),a("div",{staticClass:"ca-content"},[2==t.ca_active?a("conversations-component",{attrs:{base_url:t.base_url}}):t._e(),5==t.ca_active?a("settings-component",{attrs:{base_url:t.base_url}}):t._e()],1)]):t._e()]):t._e()])},c=[],r=a("bc3a"),o=a.n(r),l=a("2f62"),d={methods:{imageSource:function(t){return t?base_url+this.config.img_upld_pth+"/"+t:base_url+this.config.assets_path+"/addchat/img/avatar.png"},widgetIcon:function(t){return t?base_url+this.config.img_upld_pth+"/"+t:base_url+this.config.assets_path+"/addchat/img/addchat-shadow.png"},chatLogo:function(t){return t?base_url+this.config.img_upld_pth+"/"+t:base_url+this.config.assets_path+"/addchat/img/addchat-logo-white.png"},showConfirm:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.add({modal:{status:"c-active",message:t,action:e}})},showNotification:function(t,e){this.add({notify:{status:"c-active",message:e,type:t}}),setTimeout(function(){this.add({notify:{status:"",message:null,type:null}})}.bind(this),4e3)},fullName:function(t){if("undefined"!==typeof t){var e=t.substring(0,t.lastIndexOf("@"));return e}},rightClick:function(t,e){document.querySelector(".c-messages").addEventListener("contextmenu",function(t){t.preventDefault()},!1),this.add({modal:{status:"c-active",message:t},messageIndex:e})},timeSince:function(t){var e=Math.floor((new Date-t)/1e3),a=Math.floor(e/31536e3);return a>1?a+" yr":(a=Math.floor(e/2592e3),a>1?a+" mon":(a=Math.floor(e/86400),a>1?a+" day":(a=Math.floor(e/3600),a>1?a+" hrs":(a=Math.floor(e/60),a>1?a+" min":Math.floor(e)+" sec"))))},imageModal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.add({image_modal:{status:"c-active",path:t}})},toFormData:function(t){var e=new FormData;return Object.keys(t).forEach(function(a){e.append(a,t[a])}),e}}},u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"c-settings",class:{"c-active":3==t.active}},[a("div",{staticClass:"c-profile"},[a("form",{ref:"form",attrs:{method:"POST",enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.validateForm(e)}}},[a("input",{attrs:{type:"hidden",name:t.csrf_name},domProps:{value:t.csrf_token}}),a("div",{staticClass:"c-edit c-animate"},[a("input",{directives:[{name:"validate",rawName:"v-validate"}],ref:"image",attrs:{type:"file",id:"image",name:"image",accept:".png, .jpg, .jpeg","data-vv-rules":"image|size:10485760"},on:{change:t.onFileChange}}),a("label",{attrs:{for:"image"}}),a("input",{attrs:{type:"hidden",name:"user_id"},domProps:{value:t.user.id}})]),a("img",{staticClass:"c-image-big ",class:[0==t.user.online?"c-offline-shadow":"",1==t.user.online?"c-online-shadow":"",2==t.user.online?"c-away-shadow":"",3==t.user.online?"c-busy-shadow":""],attrs:{src:t.imageSrc?t.imageSrc:t.imageSource(t.user.avatar)},on:{click:function(e){t.imageSrc?t.imageModal(t.imageSrc):t.imageModal(t.user.avatar)}}}),a("p",{staticClass:"c-title c-animate"},[t._v(t._s(t.fullname?t.fullname:t.fullName(t.user.email)))]),a("div",{staticClass:"c-inline c-animate"},[a("div",{staticClass:"c-radio-fancy c-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"}],staticClass:"c-radio-fancy-input",attrs:{type:"radio",id:"online",name:"status",value:"1"},domProps:{checked:t._q(t.status,"1")},on:{change:function(e){t.status="1"}}}),a("label",{staticClass:"c-online c-radio-fancy-label",attrs:{for:"online"}},[t._v(t._s(t.lang.online))])]),a("div",{staticClass:"c-radio-fancy c-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"}],staticClass:"c-radio-fancy-input",attrs:{type:"radio",id:"away",name:"status",value:"2"},domProps:{checked:t._q(t.status,"2")},on:{change:function(e){t.status="2"}}}),a("label",{staticClass:"c-away c-radio-fancy-label",attrs:{for:"away"}},[t._v(t._s(t.lang.away))])]),a("div",{staticClass:"c-radio-fancy c-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"}],staticClass:"c-radio-fancy-input",attrs:{type:"radio",id:"busy",name:"status",value:"3"},domProps:{checked:t._q(t.status,"3")},on:{change:function(e){t.status="3"}}}),a("label",{staticClass:"c-busy c-radio-fancy-label",attrs:{for:"busy"}},[t._v(t._s(t.lang.busy))])]),a("div",{staticClass:"c-radio-fancy c-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"}],staticClass:"c-radio-fancy-input",attrs:{type:"radio",id:"offline",name:"status",value:"0"},domProps:{checked:t._q(t.status,"0")},on:{change:function(e){t.status="0"}}}),a("label",{staticClass:"c-offline c-radio-fancy-label",attrs:{for:"offline"}},[t._v(t._s(t.lang.offline))])])]),a("div",{staticClass:"c-input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.fullname,expression:"fullname"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"fullname",staticClass:"c-input",attrs:{type:"text",name:"fullname",placeholder:"e.g John Doe"},domProps:{value:t.fullname},on:{input:function(e){e.target.composing||(t.fullname=e.target.value)}}})]),a("button",{staticClass:"c-button c-btn-primary c-btn-block",attrs:{type:"submit"}},[t._v(t._s(t.lang.save)+" "+t._s(t.lang.profile))]),t.config.logged_user_id===t.config.admin_user_id?a("button",{staticClass:"c-button c-btn-neutral c-btn-block",attrs:{type:"button"},on:{click:function(e){return t.add({admin_active:!t.admin_active})}}},[t._v(t._s(t.lang.admin_panel))]):t._e()])])])},f=[],m=(a("6b54"),a("7bb1"));function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,s)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(a,!0).forEach(function(e){Object(s["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var v={mixins:[d],data:function(){return{status:0,fullname:null,imageSrc:null}},computed:g({},Object(l["c"])(["user","active","config","admin_active","base_url","csrf_name","csrf_token","lang"])),methods:g({},Object(l["b"])(["add"]),{resetForm:function(){this.$refs.fullname.value=null},resetImage:function(){this.$refs.image.value=null,this.imageSrc=null},onFileChange:function(t){var e=t.target.files||t.dataTransfer.files;return!!e.length&&(-1==e[0].type.indexOf("image")?(this.showNotification("error",this.lang.image_upload),!1):e[0].size>10485760?(this.showNotification("error",this.lang.image_size+": 10 MB"),!1):void this.createImage(e[0]))},createImage:function(t){var e=new FileReader,a=this;e.onload=function(t){a.image=t.target.result,a.imageSrc=t.target.result},e.readAsDataURL(t)},validateForm:function(t){var e=this;this.$validator.validateAll().then(function(a){if(a)return e.formSubmit(t),!0;e.showNotification("error",e.errors.all().toString())})},serverValidate:function(t){var e=this;this.$validator.validateAll().then(function(a){e.$validator.errors.add(t),e.showNotification("error",e.errors.all().toString()),e.errors.clear()})},formSubmit:function(t){var e=this,a=addchat_api+"profile_update",n=new FormData(this.$refs.form);o.a.post(a,n).then(function(t){var a=Object(s["a"])({},csrf_name,csrf_token),n=e.toFormData(a);if(t.data.status)e.resetForm(),e.resetImage(),e.add({user:t.data.profile}),o.a.post(addchat_api+"get_config",n).then(function(t){e.add({config:t.data.config}),e.showNotification("success",e.lang.profile+" "+e.lang.saved)}).catch(function(t){});else{var i=[];i=[{field:"message",msg:t.data.response}],e.serverValidate(i)}}).catch(function(t){})},getProfile:function(){var t=this,e=Object(s["a"])({},csrf_name,csrf_token),a=this.toFormData(e);o.a.post(addchat_api+"get_profile",a).then(function(e){t.add({user:e.data.profile}),t.status=null==t.user.online?0:t.user.online,t.fullname=t.user.fullname?t.user.fullname:t.fullName(t.user.email)}).catch(function(t){})}}),mounted:function(){this.getProfile()},watch:{active:function(){3!==this.active&&(this.status=null==this.user.online?0:this.user.online,this.fullname=this.user.fullname?this.user.fullname:this.fullName(this.user.email),this.resetImage())}}},b=v,h=a("2877"),y=Object(h["a"])(b,u,f,!1,null,null,null),j=y.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"c-contacts",class:{"c-active":1==t.active}},[a("vuescroll",[a("div",{staticClass:"c-buddy"},[a("div",{staticClass:"c-heading"},[a("p",{staticClass:"c-title c-animate"},[t._v(t._s(t.lang.conversations))])])]),t._l(t.search?t.search_users:t.users,function(e,s){return a("div",{key:s,staticClass:"c-contact"},[a("img",{staticClass:"c-image",attrs:{src:t.imageSource(e.avatar)},on:{click:function(a){return t.imageModal(e.avatar)}}}),a("div",{on:{click:function(a){return t.add({buddy_id:e.id,buddyIndex:s})}}},[a("p",{staticClass:"c-title"},[t._v(t._s(e.username?e.username:t.fullName(e.email)))]),a("span",{staticClass:"c-subtitle"},[t._v(t._s(e.email))]),null!=e.online?a("div",{staticClass:"c-status ",class:[0==e.online?"c-offline":"",1==e.online?"c-online":"",2==e.online?"c-away":"",3==e.online?"c-busy":""]}):t._e(),null==e.online?a("div",{staticClass:"c-status c-offline "}):t._e(),t._l(t.notifications,function(s,n){return s.users_id==e.id?a("div",{key:n,staticClass:"c-notification"},[t._v("\n                    "+t._s(s.messages_count)+" \n                ")]):t._e()})],2)])}),t.more?a("span",{staticClass:"c-more c-animate",on:{click:function(e){return t.getUsers(0)}}},[t._v(t._s(t.lang.show_more))]):t._e()],2),a("div",{staticClass:"c-search"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"c-search-input",attrs:{type:"text",placeholder:t.lang.start+" "+t.lang.search,name:"search"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})])],1)},O=[],w=a("75fc"),k=(a("386d"),a("2ef0")),P=a.n(k),x=a("77a0"),D=a.n(x);function S(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,s)}return a}function M(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?S(a,!0).forEach(function(e){Object(s["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):S(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var N={components:{vuescroll:D.a},mixins:[d],data:function(){return{offset:0,more:1,search:"",search_users:null}},watch:{search:function(t,e){this.debouncedgetUsers()},active:function(){1===this.active&&this.getUsers(1)},buddy_id:function(){0===this.buddy_id&&this.getUsers(1)}},computed:M({},Object(l["c"])(["base_url","config","users","buddy_id","messages","notifications","active","buddyIndex","user","lang"])),methods:M({},Object(l["b"])(["add","update","addMessages"]),{debouncedgetUsers:_.debounce(function(){this.getUsers(1)},500),getUsers:function(t){var e,a=this,n=(e={},Object(s["a"])(e,csrf_name,csrf_token),Object(s["a"])(e,"search",this.search),e),i=this.toFormData(n);if(1==t&&(this.offset=0,this.more=1),1==this.more){var c=addchat_api+"get_users/"+this.offset;this.search&&(c=addchat_api+"get_users/"+this.offset),o.a.post(c,i).then(function(e){var s;(a.offset=e.data.offset,a.more=e.data.more,1==a.more)&&(1==t?a.search?a.search_users=e.data.users:a.add({users:e.data.users}):a.search?(s=a.search_users).push.apply(s,Object(w["a"])(e.data.users)):a.update({users:e.data.users}))}).catch(function(t){})}},getUpdates:function(){var t=this;setInterval(function(){var e,a=(e={},Object(s["a"])(e,csrf_name,csrf_token),Object(s["a"])(e,"notification",JSON.stringify(t.notifications)),e),n=t.toFormData(a);o.a.post(addchat_api+"get_updates",n).then(function(e){e.data.status&&(t.add({notifications:e.data.notification}),new Audio(base_url+t.config.assets_path+"/addchat/sound/notification.mp3").play(),t.getLatestMessage())}).catch(function(t){})},6e3)},getLatestMessage:function(){var t,e=(t={},Object(s["a"])(t,csrf_name,csrf_token),Object(s["a"])(t,"search",this.search),t),a=this.toFormData(e),n=this;this.notifications.length>0&&this.notifications.forEach(function(t,e){n.buddy_id>0&&t.users_id==n.buddy_id&&o.a.post(addchat_api+"get_latest_message/"+n.buddy_id,a).then(function(t){null!==t.data.messages&&(n.messages.forEach(function(t,e){0==t.is_read&&(t.is_read=1)}),n.addMessages({messages:t.data.messages}),n.$delete(n.notifications,e))})})}}),mounted:function(){this.getUsers(1),this.getUpdates()}},Y=N,E=Object(h["a"])(Y,C,O,!1,null,null,null),F=E.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"c-buddy",class:{"c-expand":t.expand}},[a("span",{staticClass:"c-close",on:{click:function(e){t.expand=!1}}},[t._v("×")]),a("div",{staticClass:"c-buddy-image c-animate"},[a("img",{staticClass:"c-image c-online-shadow",attrs:{src:t.imageSource(t.buddy.avatar)},on:{click:function(e){1==t.expand&&t.imageModal(t.buddy.avatar),t.expand=!0}}})]),a("div",{staticClass:"c-heading"},[a("p",{staticClass:"c-title animate"},[t._v("\n            "+t._s(t.buddy.name?t.buddy.name:t.fullName(t.buddy.email))+"\n            "),1==t.buddy.status?a("span",{staticClass:"c-subtitle animate"},[t._v(t._s(t.lang.online))]):t._e(),2==t.buddy.status?a("span",{staticClass:"c-subtitle animate"},[t._v(t._s(t.lang.away))]):t._e(),3==t.buddy.status?a("span",{staticClass:"c-subtitle animate"},[t._v(t._s(t.lang.busy))]):t._e(),t.buddy.status<1?a("span",{staticClass:"c-subtitle animate"},[t._v(t._s(t.lang.offline))]):t._e()])]),a("div",{staticClass:"c-options"},[a("span",{staticClass:"c-button-round",on:{click:function(e){return t.showConfirm(t.lang.please+" "+t.lang.delete,4)}}},[a("i",{staticClass:"c-delete"})])]),t.modal.action>0?a("div",{staticClass:"c-modal c-animate ",class:[t.modal.status],attrs:{tabindex:"-1"}},[a("div",{staticClass:"c-modal-dialog c-modal-dialog-centered"},[a("div",{staticClass:"c-modal-content"},[a("div",{staticClass:"c-modal-body"},[a("div",{staticClass:"c-card"},[a("div",{staticClass:"c-card-header"},[a("h6",{staticClass:"c-card-title"},[t._v(t._s(t.lang.are_you_sure))]),a("span",{staticClass:"c-close",on:{click:function(e){return t.add({modal:{status:"",message:null,action:0}})}}},[t._v("\n                            ×")])]),a("div",{staticClass:"c-card-body"},[4==t.modal.action?a("button",{staticClass:"c-button c-btn-neutral c-btn-block",attrs:{type:"button"},on:{click:function(e){return t.deleteChat(t.buddy.id)}}},[t._v("\n                                "+t._s(t.modal.message)+"\n                            ")]):t._e()])])])])])]):t._e()])},z=[];function I(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,s)}return a}function $(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?I(a,!0).forEach(function(e){Object(s["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):I(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var A={mixins:[d],data:function(){return{expand:!1}},computed:$({},Object(l["c"])(["base_url","config","buddy","buddy_id","users","buddyIndex","modal","lang"])),methods:$({},Object(l["b"])(["add","update"]),{deleteChat:function(t){var e=this,a=Object(s["a"])({},csrf_name,csrf_token),n=this.toFormData(a);o.a.post(addchat_api+"delete_chat/"+t,n).then(function(t){e.add({modal:{status:"",message:null,action:0}}),t.data.status&&(e.add({messages:[]}),e.showNotification("success",e.lang.message+" "+e.lang.deleted))}).catch(function(t){})},getBuddy:function(){var t=this;this.$store.watch(function(t){return t.buddy_id},function(){if(t.buddy_id>0){var e,a=(e={},Object(s["a"])(e,csrf_name,csrf_token),Object(s["a"])(e,"user",t.buddy_id),e),n=t.toFormData(a);o.a.post(addchat_api+"get_buddy",n).then(function(e){t.add({buddy:e.data.buddy})}).catch(function(t){})}})}}),mounted:function(){this.getBuddy()}},H=A,L=Object(h["a"])(H,q,z,!1,null,null,null),T=L.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.buddy_id?a("div",{staticClass:"c-messages"},[t.modal.action?t._e():a("div",{staticClass:"c-modal c-animate ",class:[t.modal.status],attrs:{tabindex:"-1"}},[a("div",{staticClass:"c-modal-dialog c-modal-dialog-centered"},[a("div",{staticClass:"c-modal-content"},[a("div",{staticClass:"c-modal-body"},[a("div",{staticClass:"c-card"},[a("div",{staticClass:"c-card-header"},[a("h6",{staticClass:"c-card-title"},[t._v("Message Actions")]),a("span",{staticClass:"c-close",on:{click:function(e){return t.add({modal:{status:"",message:null},messageIndex:null})}}},[t._v("\n                            ×")])]),t.modal.message?a("div",{staticClass:"c-card-body"},[a("button",{staticClass:"c-button c-btn-neutral c-btn-block",attrs:{type:"button"},on:{click:function(e){return t.msgDelete(t.modal.message.message_id?t.modal.message.message_id:t.modal.message.id)}}},[t._v("\n                                Delete\n                            ")])]):t._e()])])])])]),a("vuescroll",{ref:"vs",attrs:{ops:t.ops},on:{"handle-resize":t.handleScroll}},[t.more?a("span",{staticClass:"c-more c-animate",on:{click:function(e){return t.getMessages(0)}}},[t._v(t._s(t.lang.show_older))]):t._e(),t._l(t.messages,function(e,s){return a("div",{key:s,staticClass:"c-message c-animate",class:e.sender==t.config.logged_user_id?"c-reply":""},[0==s||s>0&&t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD")!=t.moment(t.messages[s-1].dt_updated,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD")?a("label",{staticClass:"c-daystamp c-animate"},[t._v("\n                "+t._s(t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss").format("MMMM Do YYYY"))+"\n                \n            ")]):t._e(),a("div",{staticClass:"c-bubble-wrapper"},[a("div",{directives:[{name:"longclick",rawName:"v-longclick",value:function(){return t.rightClick(e,s)},expression:"() => rightClick(message, index)"}],staticClass:"c-bubble c-animate",domProps:{innerHTML:t._s(e.message)},on:{contextmenu:function(a){return t.rightClick(e,s)}}})]),a("span",{staticClass:"c-timestamp c-animate"},[t._v(t._s(t.timeSince(t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss "))))]),a("span",{staticClass:"c-read c-sent c-animate",class:{"c-active":e.sender==t.config.logged_user_id&&0==e.is_read}}),a("span",{staticClass:"c-read c-seen c-animate",class:{"c-active":e.sender==t.config.logged_user_id&&1==e.is_read}})])})],2)],1):t._e()},B=[];function R(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,s)}return a}function V(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?R(a,!0).forEach(function(e){Object(s["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):R(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var J={components:{vuescroll:D.a},mixins:[d],data:function(){return{offset:0,more:1,date:null,moment:moment,ops:{vuescroll:{},scrollPanel:{initialScrollY:100,initialScrollX:!1,scrollingX:!1,scrollingY:!0,speed:300,easing:void 0,verticalNativeBarPos:"right"},rail:{},bar:{}}}},computed:V({},Object(l["c"])(["base_url","config","users","messages","user","buddy_id","buddy","notifications","modal","messageIndex","lang"])),methods:V({},Object(l["b"])(["add","update","prepend"]),{getMessages:function(t){var e=this,a=Object(s["a"])({},csrf_name,csrf_token),n=this.toFormData(a);1==t&&(this.offset=0,this.more=1),1==this.more&&this.buddy_id>0&&o.a.post(addchat_api+"get_messages/"+this.buddy_id+"/"+this.offset,n).then(function(a){if(a.data.status){if(1==t){var s=e.buddy_id,n=null;e.notifications.length>0&&e.notifications.forEach(function(t,e){t.users_id===s&&(n=e)}),null!==n&&e.$delete(e.notifications,n),e.add({messages:a.data.messages})}else e.prepend({messages:a.data.messages});e.more=a.data.more,e.offset=a.data.offset}}).catch(function(t){})},msgDelete:function(t){var e=this,a=Object(s["a"])({},csrf_name,csrf_token),n=this.toFormData(a);o.a.post(addchat_api+"message_delete/"+t,n).then(function(t){t.data.status?(null!==e.messageIndex&&e.$delete(e.messages,e.messageIndex),e.showNotification("success",t.data.message)):e.showNotification("errror",t.data.message),e.add({modal:{status:"",message:null},messageIndex:null})}).catch(function(t){})},handleScroll:function(t,e,a){this.$refs["vs"].scrollBy({dy:200})}}),mounted:function(){var t=this;this.$store.watch(function(t){return t.buddy_id},function(){t.getMessages(1)})}},G=J,X=Object(h["a"])(G,U,B,!1,null,null,null),K=X.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"c-send"},[a("form",{ref:"form",attrs:{method:"POST",enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.validateForm(e)}}},[a("input",{attrs:{type:"hidden",name:t.csrf_name},domProps:{value:t.csrf_token}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.buddy_id,expression:"buddy_id"}],attrs:{type:"hidden",name:"user"},domProps:{value:t.buddy_id},on:{input:function(e){e.target.composing||(t.buddy_id=e.target.value)}}}),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],ref:"message",staticClass:"c-send-textarea c-no-emoji",attrs:{rows:"1",name:"message",placeholder:t.lang.write+" "+t.lang.message},domProps:{value:t.message},on:{focus:function(e){t.dialogHidden=!0},input:function(e){e.target.composing||(t.message=e.target.value)}}}),a("button",{ref:"submit",staticClass:"c-button-round",attrs:{type:"submit"}},[a("i",{staticClass:"c-send-message c-animate"})])])])},W=[];function Z(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,s)}return a}function tt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Z(a,!0).forEach(function(e){Object(s["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Z(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var et={mixins:[d],data:function(){return{message:"",imageSrc:null}},computed:tt({},Object(l["c"])(["base_url","buddy","buddy_id","messages","config","csrf_name","csrf_token","user","config","lang"])),methods:tt({},Object(l["b"])(["add","update"]),{resetForm:function(){this.message=null},validateForm:function(t){var e=this;this.$validator.validateAll().then(function(a){if(a)return e.formSubmit(t),!0;e.showNotification("error",e.errors.all().toString())})},serverValidate:function(t){var e=this;this.$validator.validateAll().then(function(a){e.$validator.errors.add(t),e.showNotification("error",e.errors.all().toString()),e.errors.clear()})},formSubmit:function(t){var e=this,a=addchat_api+"send_message",s=new FormData(this.$refs.form);this.resetForm(),o.a.post(a,s).then(function(t){if(t.data.status)e.update({messages:t.data.message});else{[{field:"message",msg:t.data.response}]}}).catch(function(t){})}})},at=et,st=Object(h["a"])(at,Q,W,!1,null,null,null),nt=st.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ca-conversations ca-active c-animate"},[a("div",{staticClass:"ca-card"},[a("h3",{staticClass:"ca-card-header"},[t._v(t._s(t.lang.conversations))]),a("div",{staticClass:"ca-table"},[a("div",{staticClass:"c-chatbox",class:{"c-active":t.active}},[a("span",{staticClass:"c-close",on:{click:function(e){t.active=!1,t.offset2=0,t.more2=1,t.conversations=[]}}},[t._v("×")]),a("div",{staticClass:"c-buddy"},[a("div",{staticClass:"c-heading"},[a("p",{staticClass:"c-title animate"},[t._v(t._s(t.sender_name)+" "),a("i",{staticClass:"fas fa-arrow-circle-right"}),t._v(" "+t._s(t.receiver_name)+" ")])])]),a("div",{staticClass:"c-messages c-animate"},[a("vuescroll",[t.more2>0?a("span",{staticClass:"c-more",on:{click:function(e){return t.get_conversations(t.sender_id,t.receiver_id,t.sender_name,t.receiver_name)}}},[t._v(t._s(t.lang.show_older))]):t._e(),t._l(t.conversations,function(e,s){return a("div",{key:s,staticClass:"c-message c-animate",class:{"c-reply":e.m_from==t.receiver_id}},[0==s||s>0&&t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD")!=t.moment(t.conversations[s-1].dt_updated,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD")?a("label",{staticClass:"c-daystamp c-animate"},[t._v("\n                                "+t._s(t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss").format("MMMM Do YYYY"))+"\n                            ")]):t._e(),a("div",{staticClass:"c-bubble-wrapper"},[a("div",{staticClass:"c-bubble c-animate",domProps:{innerHTML:t._s(e.message)}})]),a("span",{staticClass:"c-timestamp c-animate"},[t._v(t._s(t.timeSince(t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss"))))]),e.m_to_delete>0&&e.m_from_delete>0?a("span",{staticClass:"c-deleted"},[t._v(t._s(t.lang.deleted))]):t._e()])})],2)],1)]),a("div",{staticClass:"ca-table-header"},[a("div",{staticClass:"ca-table-header-cell"},[t._v(t._s(t.lang.chat)+" "+t._s(t.lang.between))]),a("div",{staticClass:"ca-table-header-cell"},[t._v(t._s(t.lang.last)+" "+t._s(t.lang.message))]),a("div",{staticClass:"ca-table-header-cell"},[t._v(t._s(t.lang.date))]),a("div",{staticClass:"ca-table-header-cell"},[t._v(t._s(t.lang.view))])]),a("div",{staticClass:"ca-table-body"},t._l(t.chat_betweens,function(e,s){return a("div",{key:s,staticClass:"ca-table-row"},[a("div",{staticClass:"ca-table-cell"},[t._v(t._s(e.m_from_username?e.m_from_username:t.fullName(e.m_from_email))+" "),a("i",{staticClass:"fas fa-arrow-circle-right"}),t._v(" \n                        "+t._s(e.m_to_username?e.m_to_username:t.fullName(e.m_to_email))+"\n                    ")]),a("div",{staticClass:"ca-table-cell"},[t._v(t._s(e.message)+" ")]),a("div",{staticClass:"ca-table-cell"},[t._v(t._s(t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss").format("LLLL")))]),a("div",{staticClass:"ca-table-cell"},[a("button",{staticClass:"c-button c-btn-primary c-btn-sm",attrs:{type:"button"},on:{click:function(a){t.get_conversations(e.m_from,e.m_to,e.m_from_username?e.m_from_username:t.fullName(e.m_from_email),e.m_to_username?e.m_to_username:t.fullName(e.m_to_email))}}},[t._v("\n                            "+t._s(t.lang.view)+"\n                        ")])])])}),0),a("div",{staticClass:"ca-table-header"},[t.more>0?a("div",{staticClass:"ca-table-header-cell ca-load-more",on:{click:function(e){return t.chatBetween()}}},[t._v(t._s(t.lang.show_more))]):t._e()])])])])},ct=[];function rt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,s)}return a}function ot(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?rt(a,!0).forEach(function(e){Object(s["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):rt(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var lt={components:{vuescroll:D.a},props:["base_url"],mixins:[d],computed:ot({},Object(l["c"])(["config","lang"])),data:function(){return{chat_betweens:Array(0),conversations:Array(0),offset:0,more:1,active:!1,sender_name:null,receiver_name:null,sender_id:null,receiver_id:null,offset2:0,more2:1,moment:moment}},methods:ot({},Object(l["b"])(["add"]),{chatBetween:function(){var t=this,e=Object(s["a"])({},csrf_name,csrf_token),a=this.toFormData(e);o.a.post(addchat_api+"a_chat_between/"+this.offset,a).then(function(e){if(e.data.status){var a;if(t.chat_betweens.length>0)(a=t.chat_betweens).push.apply(a,Object(w["a"])(e.data.chat_betweens));else t.chat_betweens=e.data.chat_betweens;t.more=e.data.more,t.offset=e.data.offset}}).catch(function(t){})},get_conversations:function(t,e,a,n){var i=this;this.active=!0,this.sender_name=a,this.receiver_name=n,this.sender_id=t,this.receiver_id=e;var c=Object(s["a"])({},csrf_name,csrf_token),r=this.toFormData(c);o.a.post(addchat_api+"a_get_conversations/"+t+"/"+e+"/"+this.offset2,r).then(function(t){if(t.data.status){var e;if(i.conversations.length>0)(e=i.conversations).unshift.apply(e,Object(w["a"])(t.data.conversations));else i.conversations=t.data.conversations;i.more2=t.data.more,i.offset2=t.data.offset}}).catch(function(t){})}}),mounted:function(){this.chatBetween()}},dt=lt,ut=Object(h["a"])(dt,it,ct,!1,null,null,null),ft=ut.exports,mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ca-settings ca-active c-animate"},[a("div",{staticClass:"ca-card"},[a("h3",{staticClass:"ca-card-header"},[t._v(t._s(t.lang.settings))]),a("div",{staticClass:"ca-form"},[a("vuescroll",[a("div",{staticClass:"ca-form-content"},[a("form",{ref:"form",attrs:{method:"POST",enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.validateForm(e)}}},[a("input",{attrs:{type:"hidden",name:t.csrf_name},domProps:{value:t.csrf_token}}),a("p",{staticClass:"c-title"},[t._v(t._s(t.lang.general))]),a("div",{staticClass:"c-input-group"},[a("label",{staticClass:"c-label"},[t._v(t._s(t.lang.site_name))]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{type:"text",name:"site_name",placeholder:"e.g AddChat"},domProps:{value:t.settings.site_name}})]),a("div",{staticClass:"c-input-group"},[a("label",{staticClass:"c-label"},[t._v(t._s(t.lang.footer_text))]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{type:"text",name:"footer_text",placeholder:"e.g AddChat | by Classiebit"},domProps:{value:t.settings.footer_text}})]),a("div",{staticClass:"c-input-group"},[a("label",{staticClass:"c-label"},[t._v(t._s(t.lang.site_logo))]),a("img",{staticClass:"c-image-big no-radius",attrs:{src:t.imageSrc?t.imageSrc:t.imageSource(t.settings.site_logo)}}),a("div",{staticClass:"c-edit c-animate"},[a("input",{directives:[{name:"validate",rawName:"v-validate"}],ref:"image",attrs:{type:"file",id:"image",name:"image",accept:".png, .jpg, .jpeg","data-vv-rules":"image|size:10485760"},on:{change:function(e){return t.onFileChange(e,1)}}})])]),a("div",{staticClass:"c-input-group"},[a("label",{staticClass:"c-label"},[t._v(t._s(t.lang.chat_icon))]),a("img",{staticClass:"c-image-big no-radius",attrs:{src:t.imageSrc1?t.imageSrc1:t.imageSource(t.settings.chat_icon)}}),a("div",{staticClass:"c-edit c-animate"},[a("input",{directives:[{name:"validate",rawName:"v-validate"}],ref:"chat_icon",attrs:{type:"file",id:"chat_icon",name:"chat_icon",accept:".png, .jpg, .jpeg","data-vv-rules":"image|size:10485760"},on:{change:t.onFileChange}})])]),a("p",{staticClass:"c-title"},[t._v(t._s(t.lang.widget_config))]),a("label",{staticClass:"c-label"},[t._v(t._s(t.lang.session_user_id_logged))]),a("div",{staticClass:"c-input-group c-input-group-prepend"},[a("div",{staticClass:"c-prepend"},[a("div",{staticClass:"c-prepend-text"},[t._v('$_SESSION["')])]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input c-prepend-input",attrs:{type:"text",name:"session_user_id",placeholder:"e.g user_id"},domProps:{value:t.settings.session_user_id}}),a("div",{staticClass:"c-prepend"},[a("div",{staticClass:"c-prepend-text"},[t._v('"]')])])]),a("div",{staticClass:"c-input-group"},[a("label",{staticClass:"c-label"},[t._v(t._s(t.lang.admin)+" "+t._s(t.lang.users_id)+" ("+t._s(t.lang.value)+")")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{type:"number",name:"admin_user_id",placeholder:"e.g 1"},domProps:{value:t.settings.admin_user_id}})]),a("div",{staticClass:"c-input-group"},[a("label",{staticClass:"c-label"},[t._v(t._s(t.lang.pagination_limit))]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{type:"number",name:"pagination_limit",placeholder:"e.g 10"},domProps:{value:t.settings.pagination_limit}})]),a("label",{staticClass:"c-label"},[t._v(t._s(t.lang.img_upload_path))]),a("div",{staticClass:"c-input-group c-input-group-prepend"},[a("div",{staticClass:"c-prepend"},[a("div",{staticClass:"c-prepend-text"},[t._v(t._s(t.base_url_local))])]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input c-prepend-input",attrs:{type:"text",name:"img_upload_path",placeholder:"e.g upload"},domProps:{value:t.settings.img_upld_pth}})]),a("label",{staticClass:"c-label"},[t._v(t._s(t.lang.assets_path))]),a("div",{staticClass:"c-input-group c-input-group-prepend"},[a("div",{staticClass:"c-prepend"},[a("div",{staticClass:"c-prepend-text"},[t._v(t._s(t.base_url_local))])]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input c-prepend-input",attrs:{type:"text",name:"assets_path",placeholder:"e.g assets"},domProps:{value:t.settings.assets_path}})]),a("p",{staticClass:"c-title"},[t._v(t._s(t.lang.users_table))]),a("div",{staticClass:"c-input-group"},[a("label",{staticClass:"c-label"},[t._v(t._s(t.lang.users_table)+" "+t._s(t.lang.name))]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{type:"text",name:"users_table",placeholder:"e.g users"},domProps:{value:t.settings.users_table}})]),a("div",{staticClass:"c-input-group"},[a("label",{staticClass:"c-label"},[t._v(t._s(t.lang.users_id)+" ("+t._s(t.lang.column_name)+")")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{type:"text",name:"users_id",placeholder:"e.g id"},domProps:{value:t.settings.users_col_id}})]),a("div",{staticClass:"c-input-group"},[a("label",{staticClass:"c-label"},[t._v(t._s(t.lang.users_email)+" ("+t._s(t.lang.column_name)+")")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{type:"text",name:"users_email",placeholder:"e.g email"},domProps:{value:t.settings.users_col_email}})]),a("p",{staticClass:"c-title"},[t._v(t._s(t.lang.realtime)+" "+t._s(t.lang.notification))]),a("div",{staticClass:"c-input-group"},[a("label",{staticClass:"c-label"},[t._v(t._s(t.lang.notification_type))]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.notification_type,expression:"notification_type"}],staticClass:"c-input",attrs:{name:"notification_type"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.notification_type=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"0"}},[t._v("Internal "+t._s(t.lang.notification))])])]),a("button",{staticClass:"c-button c-btn-primary c-btn-block ca-settings-btn",attrs:{type:"submit"}},[t._v(t._s(t.lang.save)+" "+t._s(t.lang.settings))])])])])],1)])])},pt=[];function gt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,s)}return a}function vt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?gt(a,!0).forEach(function(e){Object(s["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):gt(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var _t={components:{vuescroll:D.a},mixins:[d],data:function(){return{settings:Array(),readonly:!0,imageSrc:null,imageSrc1:null,notification_type:0,base_url_local:null}},computed:vt({},Object(l["c"])(["config","csrf_name","csrf_token","lang"])),methods:vt({},Object(l["b"])(["add"]),{getSettings:function(){var t=this,e=Object(s["a"])({},csrf_name,csrf_token),a=this.toFormData(e);o.a.post(addchat_api+"get_config",a).then(function(e){t.settings=e.data.config,t.add({config:e.data.config}),t.notification_type=t.settings.notification_type}).catch(function(t){})},validateForm:function(t){var e=this;this.$validator.validateAll().then(function(a){if(a)return e.formSubmit(t),!0;e.showNotification("error",e.errors.all().toString())})},serverValidate:function(t){var e=this;this.$validator.validateAll().then(function(a){e.$validator.errors.add(t),e.showNotification("error",e.errors.all().toString()),e.errors.clear()})},onFileChange:function(t,e){var a=t.target.files||t.dataTransfer.files;return!!a.length&&(-1==a[0].type.indexOf("image")?(this.showNotification("error",this.lang.image_upload),!1):a[0].size>10485760?(this.showNotification("error",this.lang.image_size+": 10 MB"),!1):void this.createImage(a[0],e))},createImage:function(t,e){var a=new FileReader,s=this;a.onload=function(t){1==e?(s.image=t.target.result,s.imageSrc=t.target.result):(s.chat_icon=t.target.result,s.imageSrc1=t.target.result)},a.readAsDataURL(t)},formSubmit:function(t){var e=this,a=addchat_api+"save_settings",s=new FormData(this.$refs.form);o.a.post(a,s).then(function(t){if(t.data.status)e.showNotification("success",e.lang.settings+" "+e.lang.saved),e.getSettings();else{var a=[];a=[{field:"message",msg:t.data.response}],e.serverValidate(a)}}).catch(function(t){})}}),mounted:function(){this.getSettings(),this.base_url_local=base_url}},bt=_t,ht=Object(h["a"])(bt,mt,pt,!1,null,null,null),yt=ht.exports;function jt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,s)}return a}function Ct(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?jt(a,!0).forEach(function(e){Object(s["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):jt(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var Ot={components:{ProfileComponent:j,ContactsComponent:F,BuddyComponent:T,MessagesComponent:K,SendComponent:nt,ConversationsComponent:ft,SettingsComponent:yt},mixins:[d],data:function(){return{ca_active:2,ca_sidebar:0,admin:null}},computed:Ct({},Object(l["c"])(["base_url","buddy_id","buddy","active","admin_active","config","user","notifications","notify","modal","image_modal","csrf_name","csrf_token","close","lang"])),methods:Ct({},Object(l["b"])(["add","update","addMessages"]),{openChat:function(){if(this.close=this.add({close:!this.close}),!this.close){var t=new Audio(base_url+this.config.assets_path+"/addchat/sound/notification.mp3");t.volume=0,t.play()}},activated:function(t){this.add({active:t})},getConfig:function(){var t=this,e=Object(s["a"])({},csrf_name,csrf_token),a=this.toFormData(e);o.a.post(addchat_api+"get_config",a).then(function(e){t.add({config:e.data.config,csrf_name:csrf_name,csrf_token:csrf_token}),null!=t.config.logged_user_id&&t.getProfile()}).catch(function(){})},getProfile:function(){var t=this,e=Object(s["a"])({},csrf_name,csrf_token),a=this.toFormData(e);o.a.post(addchat_api+"get_profile",a).then(function(e){t.add({user:e.data.profile})}).catch(function(){})},countNotification:function(){var t=0;return this.notifications.length>0&&this.notifications.forEach(function(e,a){t=parseInt(t)+parseInt(e.messages_count)}),t}}),mounted:function(){this.getConfig()},watch:{admin_active:function(){var t=this,e=Object(s["a"])({},csrf_name,csrf_token),a=this.toFormData(e);o.a.post(addchat_api+"check_admin",a).then(function(e){e.data.status?(t.admin=1,t.add({admin_active:!0})):t.admin=null}).catch(function(){})}}},wt=Ot,kt=Object(h["a"])(wt,i,c,!1,null,null,null),Pt=kt.exports,xt=(a("c5f6"),a("a7fe")),Dt=a.n(xt);n["default"].use(Dt.a,o.a),n["default"].use(l["a"]);var St=new l["a"].Store({state:{lang:[],config:Array,user:Array,buddy_id:Number(0),buddyIndex:Number,buddy:Array,notifications:Array(0),users:Array(0),messages:Array,active:1,admin_active:!1,notify:{status:"",message:null,type:null},modal:{status:"",message:null,action:0},messageIndex:null,image_modal:{state:"",path:null},csrf_name:null,csrf_token:null,close:!0},mutations:{add:function(t,e){var a=e.config,s=e.lang,n=e.users,i=e.user,c=e.imagePath,r=e.messages,o=e.buddy_id,l=e.buddy,d=e.notifications,u=e.active,f=e.buddyIndex,m=e.admin_active,p=e.notify,g=e.modal,v=e.messageIndex,_=e.image_modal,b=e.csrf_name,h=e.csrf_token,y=e.close;"undefined"!==typeof s&&(t.lang=s),"undefined"!==typeof a&&(t.config=a),"undefined"!==typeof n&&(t.users=n),"undefined"!==typeof i&&(t.user=i),"undefined"!==typeof c&&(t.imagePath=c),"undefined"!==typeof r&&(t.messages=r),"undefined"!==typeof o&&(t.buddy_id=o),"undefined"!==typeof l&&(t.buddy=l),"undefined"!==typeof d&&(t.notifications=d),"undefined"!==typeof u&&(t.active=u),"undefined"!==typeof f&&(t.buddyIndex=f),"undefined"!==typeof m&&(t.admin_active=m),"undefined"!==typeof p&&(t.notify=p),"undefined"!==typeof g&&(t.modal=g),"undefined"!==typeof v&&(t.messageIndex=v),"undefined"!==typeof _&&(t.image_modal=_),"undefined"!==typeof b&&(t.csrf_name=b),"undefined"!==typeof h&&(t.csrf_token=h),"undefined"!==typeof y&&(t.close=y)},update:function(t,e){var a,s,n=e.users,i=e.messages;"undefined"!==typeof n&&(a=t.users).push.apply(a,Object(w["a"])(n));"undefined"!==typeof i&&(i.length>1?(s=t.messages).push.apply(s,Object(w["a"])(i)):t.messages.push(i))},prepend:function(t,e){var a,s=e.messages;"undefined"!==typeof s&&(s.length>1?(a=t.messages).unshift.apply(a,Object(w["a"])(s)):t.messages.unshift(s))},addMessages:function(t,e){var a,s=e.messages;"undefined"!==typeof s&&(a=t.messages).push.apply(a,Object(w["a"])(s))}}}),Mt=a("616f");function Nt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,s)}return a}function Yt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Nt(a,!0).forEach(function(e){Object(s["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Nt(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}window.moment=a("c1df"),n["default"].use(Dt.a,o.a),n["default"].use(m["a"]),n["default"].use(P.a),n["default"].use(D.a,{ops:{bar:{background:"#C0C0C0"}}});var Et=Object(Mt["longClickDirective"])({delay:400,interval:50});n["default"].directive("longclick",Et),n["default"].config.productionTip=!1,n["default"].config.devtools=!0;var Ft=!1;window.base_url=document.querySelector("#addchat_app").dataset.baseurl+"/",window.base_url=window.base_url.replace(new RegExp("//","g"),"/"),window.base_url=window.base_url.replace(new RegExp(":/","g"),"://"),window.addchat_api=window.base_url+"addchat_api/";var qt="/"+window.location.pathname+"/";function zt(t){var e=new FormData;return Object.keys(t).forEach(function(a){e.append(a,t[a])}),e}qt=qt.replace(new RegExp("//","g"),"/"),window.csrf_name=document.querySelector("#addchat_app").dataset.csrfname,window.csrf_token=document.querySelector("#addchat_app").dataset.csrftoken,window.app_lang=document.getElementsByTagName("html")[0].getAttribute("lang");var It=Object(s["a"])({},csrf_name,csrf_token),$t=zt(It);o.a.post(addchat_api+"get_config",$t).then(function(t){Ft=!0,new n["default"]({store:St,render:function(t){return t(Ft?Pt:"")},components:{App:Pt},computed:Yt({},Object(l["c"])(["lang"])),methods:Yt({},Object(l["b"])(["add"]),{get_lang:function(){var t,e=this,a=(t={},Object(s["a"])(t,csrf_name,csrf_token),Object(s["a"])(t,"lang",app_lang),t),n=zt(a);o.a.post(addchat_api+"get_lang",n).then(function(t){e.add({lang:t.data.lang})}).catch(function(){})}}),mounted:function(){this.get_lang()}}).$mount("#addchat_app")}).catch(function(){})}});